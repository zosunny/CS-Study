OSI 7계층 중 전송 계층은 송신자와 수신자를 연결하는 통신 서비스를 제공하는 계층으로 데이터의 전달 담당. 이때 데이터의 전달하기위해 사용하는 프로토콜이 TCP와 UDP

![OSI 7계층과 TCP/IP 4계층](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f1a41e68-25c8-4633-a0a4-e292fff0c922/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-10-01_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_11.10.57.png)

OSI 7계층과 TCP/IP 4계층

---

# 1. TCP (Transmission Control Protocol)

<aside>
💡 전송 제어 프로토콜로, 인터넷상에서 데이터를 메시지 형태로 보내기 위해 IP와 함께 사용하는 프로토콜

</aside>

보통 데이터의 배달을 처리하는 IP와 `패킷을 추적하고 관리`하는 TCP를 함께 사용.

TCP는 연결형 서비스를 지원하는 프로토콜로 인터넷 환경에서 기본으로 사용.

- **TCP의 패킷 추적 및 관리**
    
    *데이터는 패킷단위로 나누어 같은 목적지(IP계층)으로 전송*
    
    *Ex) 한줄로 서야하는 A,B,C 패킷들이 발신지에서 출발해 수신지로 간다고 할 때, B가 분실되고 A,C만 도착해도 목적지에서는 다 왔다고 착각할 수 있음. 따라서 A,B,C패킷에 1,2,3 번호를 부여하고 패킷의 분실 확인 처리를 해 목적지에서 재조립.*
    
    *이러한 방식으로 TCP는 패킷을 추적하고 나누어 보내진 데이터 받아 조립 가능*
    

### TCP의 특징

- 연결형 서비스로 `가상 회선 방식` 제공
    - `가상 회선 방식`
        
        *발신지와 수신지를 연결해 패킷을 전송하기 위한 논리적 경로를 배정*
        
- `3-way handshaking`과정 통해 연결 설정, 4-way handshaking 통해 연결 해제
    - `3-way handshaking`
        
        *목적지와 수신지를 확실히 해 정확한 전송 보장위해 세션 수립*
        
- 흐름 제어 및 혼잡 제어
- 높은 신뢰성 보장
- UDP보다 느린 속도
- 전이중(Full-Duplex), 점대점(Point to Point) 방식

![스크린샷 2022-10-01 오후 11.45.13.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7af498a8-e88a-4cda-84a0-b6c5b56b7cae/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-10-01_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_11.45.13.png)

TCP는 연결형 서비스로 신뢰성을 보장하기에 3-way handshaking, 흐름제어, 혼잡제어 기능 함.

이러한 CPU사용으로인해 UDP보다 속도가 느리므로 파일 전송과 같이 연속성보다 신뢰성있는 전송이 중요할 때 사용.

### TCP 서버 특징

- 서버`소켓`은 연결만 담당
    - `소켓`
        
        *소켓은 네트워크 상에서 돌아가는 두 개의 프로그램 간 양방향 통신의 하나의 `엔드 포인트`. (포트 번호에 바인딩되어 TCP 레이어에서 데이터가 전달되어야하는 어플리케이션을 식별할 수 있게 함)*
        
        - `엔드 포인트`
            
            *(아이피 주소 + 포트 번호) 조합으로 모든 TCP 연결은 2개의 엔드 포인트로 유일하게 식별되어질 수 있어 클라이언트와 서버 간 여러 개의 연결 맺어질 수 있음*
            
- 연결과정에서 반환된 클라이언트 소켓은 데이터의 송수신에 사용
- 서버와 클라이언트는 1대1로 연결
- 스트림 전송으로 전송 데이터 크기 무제한
- `패킷`에 대한 응답 해야하므로 (시간 지연, CPU 소모) 성능이 낮음
    - `패킷`
        
        *인터넷 내에서 데이터 보내기 위한 경로배정(라우팅)을 효과적으로 하기 위해 데이터를 여러 개의 조각(패킷)들로 나누어 전송.*
        
- 스트리밍 서비스에 불리 (손실된 경우 재전송 요청 함)

---

# 2. UDP (User Datagram Protocol)

<aside>
💡 사용자 데이터그램 프로토콜로, 데이터를 데이터그램 단위로 처리하는 프로토콜

</aside>

비연결형 프로토콜로 연결위해 할당되는 논리적인 경로가 없음.

각각의 패킷은 다른 경로로 전송되고, 각각의 패킷은 독립적인 관계 지니게 됨.

이렇게 데이터를 서로 다른 경로로 독립적으로 처리하는 프로토콜이 UDP.

- 데이터그램
    
    *독립적인 관계를 지니는 패킷*
    

### UDP 특징

- 비연결형 서비스로 데이터그램 방식 제공
- 정보 주고 받을 때 정보를 보내거나 받는다는 신호절차 거치지 않음
- UDP헤더의 CheckSum 필드 통해 최소한의 오류만 검출
- 신뢰성 낮음
- TCP보다 속도가 빠름

![스크린샷 2022-10-02 오전 12.25.20.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/28811ce1-63be-4ac1-9616-6c23599f0d01/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-10-02_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.25.20.png)

UDP는 비연결형 서비스이기에 연결 설정 해제 과정이 존재하지 않고, 패킷에 순서를 부여해 재조립하거나 `흐름제어, 혼잡제어` 기능 처리하지 않음

따라서, TCP보다 속도가 빠르고 네트워크 부하가 적지만 신뢰성있는 데이터의 전송을 보장하지 않아 스트리밍과 같은 신뢰성보다 연속성이 중요한 서비스에 자주 사용

### UDP 서버 특징

- 연결자체 없어(connect 함수 불필요) 서버 소켓과 클라이언트 소켓 구분 없음
- 소켓 대신 IP를 기반으로 데이터 전송
- 서버와 클라이언트는 1대1, 1대N, N대M 등으로 연결될 수 있음
- 데이터그램(메시지)단위로 전송되며 그 크기는 65535바이트로, 크기 초과시 잘라서 보냄
- 흐름제어가 없어 패킷이 제대로 전송되었는지, 오류가 없는지 확인할 수 없음
- 파일 전송과 같은 신뢰성 보다 성능(연속성)이 중요되는 경우 사용

- **흐름제어와 혼잡제어**
    
    **흐름제어** : 데이터를 송신하는 곳과 수신하는 곳의 데이터 `처리 속도 조절`해 수신자의 버퍼 오버플로우 방지. Ex)송신하는 곳에서 감당안되게 데이터를 빠르게 많이 보내면 수신자에서 문제 발생
    
    **혼잡제어** : 네트워크 내의 `패킷 수`가 넘치도록 증가하는 것을 방지. 만약 정보의 소통량이 과다인 경우 패킷을 조금만 전송해 혼잡 붕괴 현상 예방
    

---

# 3. TCP vs UDP

![스크린샷 2022-10-02 오전 1.43.23.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2afb64f1-b8ec-46c2-8f49-daf2333cfb63/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-10-02_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_1.43.23.png)

---

## Reference

[https://www.daleseo.com/what-is-a-socket/](https://www.daleseo.com/what-is-a-socket/)

[https://mangkyu.tistory.com/15](https://mangkyu.tistory.com/15)
