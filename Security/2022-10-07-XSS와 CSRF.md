# 1. XSS (Cross-Site-Scripting)

<aside>
💡 악의적인 사용자가 공격대상 **사이트에 스크립트**를 넣는 기법으로, 주로 다른 웹사이트와 정보를 교환하는 식으로 작동 → `사이트 간 스크립팅`

</aside>

- 웹 애플리케이션이 사용자로부터 입력받은 값을 제대로 검사하지 않고 사용할 경우 나타남.
- 공격에 성공하면 사이트에 접속한 사용자는 삽입된 코드를 실행하게 됨.
- 의도치 않은 행동 수행시키거나 `쿠키`나 `세션` 토큰 등의 민감 정보 탈취.
- 주로 자바스크립트 사용해 공격.
- 공격 방법이 단순하고 기초적이나, 많은 웹사이트들이 XSS에 대한 방어 조치 해두지 않아 공격 받는 경우가 많음.
- 여러 사용자가 접근 가능한 게시판 등에 코드 삽입하는 경우 많고, 메일과 같은 매체나 닉네임에 코드를 심기도 함.
- 공격 방법에 따라 `Stored XSS`와 `Reflected XSS`로 나뉨

## Stored XSS와 Reflected XSS

### Stored XSS

- 사이트 게시판 or 댓글 or 닉네임 등 스크립트가 서버에 저장되어 실행
- 보통의 XSS 경우 이 방식

### Reflected XSS

- URL 파라미터(특히 GET 방식)에 스크립트를 넣어 서버에 저장하지 않고 그 즉시 스크립트 생성
- 브라우저 자체에서 차단하는 경우가 많아 상대적으로 공격 성공X

## Stored XSS vs Reflected XSS

![스크린샷 2022-10-03 오후 4.11.54.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a3237bf5-d5d2-496b-bb18-3d7080036d61/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-10-03_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.11.54.png)

# 2. CSRF (Cross-Site Request Fogery)

<aside>
💡 사용자가 자신의 **의지와는 무관**하게 공격자가 **의도한 행위**(수정, 삭제, 등록 등)을 특정 웹사이트에 **요청**하게 하는 공격 → `사이트 간 요청 위조`

</aside>

- 웹 사이트 취약점 공격
- XSS 가 **사용자**가 **특정 웹사이트**를 **신용**하는 점을 노린 것 이라면,
    
    CSRF는 **특정 웹사이트**가 **사용자의 웹 브라우저**를 **신용**하는 상태를 노린 것
    
- 사용자가 웹 사이트에 로그인한 상태에서 사이트간 요청 위조 공격 코드가 삽입된 페이지를 열면 → 공격 대상이 되는 웹 사이트는 위조된 공격 명령이 믿을 수 있는 사용자로부터 발송된 것으로 판단하게 되어 공격에 노출 됨.
- CSRF는 공격자에 의한 사용자 컴퓨터 감염 or 사이트 해킹 공격 X
- 공격 성공 조건
    - 위조 요청을 전송하는 서비스(ex. 페이스북)에 희생자가 로그인 상태여야 함.
    - 희생자는 공격자가 만든 피싱 사이트에 접속해야 함.

## XSS vs CSRF

![스크린샷 2022-10-03 오후 4.29.50.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/60682d23-79aa-48fa-8d1a-2819a211bbb3/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-10-03_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.29.50.png)

- XSS
    - `사이트변조` or `백도어` 통해 **클라이언트에 대한 악성공격**
        - `웹사이트 변조`
            - *사이트나 웹페이지의 시각적 모습을 바꾸는 웹사이트에 대한 공격*
            - 공격 방법
                - **패킷 가공 공격** : 데이터 교환시 공격. 사용자 요청 데이터에 대한 응답을 보낼 때 해당 데이터에 비정상적으로 접근. 웹사이트 관리자/일반 이용자 모두 이를 잘 인지하지 못함
                - **XSS** : 해커는 악성 코드를 신뢰할 수 있는 서버에 저장. 사용자가 접근할 때까지 기다림
                - **SQL 인젝션** : 웹 애플리케이션 취약점을 통해 개발자가 예상하지 못했던 쿼리 실행되도록 하는 공격. 관리자가 의도하지 않은 명령이 실행되기 때문에 데이터베이스가 비정상적으로 조작되고 정보유출 발생
                - **스푸핑**(Spoofing), **중간자 공격**(Man in the Middle Attack), **세션 하이재킹 공격**(Session Jacking Attack) 등이 있음
            - 대책
                - 웹사이트 관리자 입장
                    - 미들웨어 프로그램, 플러그인 등 최신 버전 유지
                    - 지속적인 웹 애플리케이션 취약점 정보 수집
                    - FTP(File Transfer Protocol)등의 로그인 ID/PW 관리
                    - **웹방화벽**(WAF, Web Application Firewall) 활용해 공격 차단 및 비정상적 콘텐츠 확인
                - 웹사이트 이용자 입장
                    - 사용 OS 정기적 업데이트
                    - 보안 SW 설치 및 최신 버전 유지
                    - 무료 SW 나 신뢰할 수 없는 사이트 접속 지양
        - `백도어`
            - 시스템에 접근하기 위해 **정상적 인증 절차 무효화**하는 악성 코드 유형
            - 공격자는 컴퓨터 및 SW 보안 취약점 통해 사용자의 컴퓨터에 백도어 생성
            - 사용자 몰래 설피되고 자신을 드러내지 않음
            - `맬웨어`나 `트로이 목마`와 같은 악성 코드 통해 백도어 생성, 사용자 데이터 빼내거나 시스템 원격 제어
                - *멜웨어 : 컴퓨터 시스템에 대한 손상 or 원치 않는 작업 수행하도록 설계된 악성 SW*
                    - *트로이 목마 : 마치 유용한 프로그램인 것처럼 위장해 사용자에게 접근해 설치하게끔 유도한 뒤, 컴퓨터나 시스템 내부 정보를 빼돌리거나 원격조종하는 악성 SW 프로그램*
            - 컴퓨터의 시스템이나 네트워크 또는 응용 프로그램의 일반적인 보안 조치 우회해 접근
            - 데이터베이스 및 파일 서버와 같은 애플리케이션 내의 리소스에 대한 원격 접속 가능해져, 공격자가 원격으로 시스템 명렬 실행하고 각종 악성 코드들 업데이트
    - 인증된 세션 없어도 공격 가능, 자바스크립트 실행 시키는 공격
- CSRF
    - 요청 위조 → 사용자 권한 이용해 **서버에 대한 악성공격**
    - 인증된 세션 활용해, 특정 행동 실행 시키는 공격

## XSS와 CSRF 방지대책

![스크린샷 2022-10-03 오후 4.35.25.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e87b7e44-e73c-4e4a-9e48-5fc20f6a6245/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-10-03_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.35.25.png)

- `Secure coding (시큐어코딩)`
    - SW 개발함에 있어 개발자의 실수, 논리적 오류 등으로 인해 SW에 내포될 수 있는 보안취약점을 배제하기 위한 코딩 기법
    - Java 기반으로 정보시스템 개발시, 고려해야할 보안약점(83개) 설명과 보안대책 이해를 위한 코딩 예제를 제시
        
        ![스크린샷 2022-10-03 오후 5.31.52.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0de4db38-6670-4d13-a7f7-ca213cfb050b/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-10-03_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.31.52.png)
        

## Reference

[https://lucete1230-cyberpolice.tistory.com/23](https://lucete1230-cyberpolice.tistory.com/23)

[https://ko.wikipedia.org/wiki/웹사이트_변조](https://ko.wikipedia.org/wiki/%EC%9B%B9%EC%82%AC%EC%9D%B4%ED%8A%B8_%EB%B3%80%EC%A1%B0)

[https://blog.naver.com/pentamkt/221698660905](https://blog.naver.com/pentamkt/221698660905)

[https://www.inforad.co.kr/single-post/cyber-security-backdoor](https://www.inforad.co.kr/single-post/cyber-security-backdoor)

[https://support.microsoft.com/ko-kr/topic/바이러스-및-기타-맬웨어를-방지하고-제거하는-방법-53dc9904-0baf-5150-6e9a-e6a8d6fa0cb5](https://support.microsoft.com/ko-kr/topic/%EB%B0%94%EC%9D%B4%EB%9F%AC%EC%8A%A4-%EB%B0%8F-%EA%B8%B0%ED%83%80-%EB%A7%AC%EC%9B%A8%EC%96%B4%EB%A5%BC-%EB%B0%A9%EC%A7%80%ED%95%98%EA%B3%A0-%EC%A0%9C%EA%B1%B0%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95-53dc9904-0baf-5150-6e9a-e6a8d6fa0cb5)

[https://m.blog.naver.com/skinfosec2000/221671485235](https://m.blog.naver.com/skinfosec2000/221671485235)

[https://codelib.tistory.com/18](https://codelib.tistory.com/18)
